(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{1760:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/other/public-api",function(){return t(9392)}])},7845:function(e,n,t){"use strict";var a=t(5893);n.Z={floatTOC:!0,github:"https://github.com/SnailyCAD",docsRepositoryBase:"https://github.com/SnailyCAD/docs",titleSuffix:" \u2013 SnailyCAD Docs",logo:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-gray-100 font-semibold",children:"SnailyCAD Docs"})}),head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{name:"msapplication-TileColor",content:"#ffffff"}),(0,a.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,a.jsx)("meta",{name:"og:title",content:"SnailyCADv4 docs"})]}),search:!0,prevLinks:!0,nextLinks:!0,footer:!1,unstable_faviconGlyph:"\ud83d\udc7b"}},9392:function(e,n,t){"use strict";t.r(n);t(7294);var a=t(2763),o=t(7829),i=t.n(o),s=t(3805),r=t(7845);function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=function(e){return(0,s.withSSG)(i()({filename:"public-api.mdx",route:"/other/public-api",meta:{},pageMap:[{name:"community",children:[{name:"index",route:"/community"},{name:"meta.json",meta:{index:"Community"}}],route:"/community"},{name:"index",route:"/"},{name:"install",children:[{name:"index",route:"/install"},{name:"meta.json",meta:{index:"Installation",updating:"Updating SnailyCAD",nginx:"NGINX"}},{name:"nginx",route:"/install/nginx"},{name:"updating",route:"/install/updating"}],route:"/install"},{name:"meta.json",meta:{index:"Introduction"}},{name:"other",children:[{name:"Translating",route:"/other/Translating"},{name:"features",route:"/other/features"},{name:"meta.json",meta:{features:"Features","public-api":"Public API Access",translating:"Translating"}},{name:"public-api",route:"/other/public-api"}],route:"/other"}]},r.Z))(e)};function u(e){var n=e.components,t=l(e,["components"]);return(0,a.kt)(c,Object.assign({components:n},t),(0,a.kt)("h1",null,"Public API Usage"),(0,a.kt)("p",null,"SnailyCADv4 allows you to create scripts that can communicate with to it. You'll find out how below."),(0,a.kt)("h2",null,"Creating the token"),(0,a.kt)("p",null,"Firstly, we must create the token. Head over to the cad-settings page and open the ",(0,a.kt)("inlineCode",{parentName:"p"},"Api Token")," tab.\nOnce there, it will allow you to enable Public API Access and generate a token.\nOnce you've generated a token you can copy it."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Make sure to not share this token with anyone. If this token gets leaked make sure to re-generate it ASAP.")),(0,a.kt)("h2",null,"Using the token"),(0,a.kt)("p",null,"When making a script that communicates to the CAD, you can add the token in the headers of the request."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"JavaScript Example")),(0,a.kt)("pre",null,(0,a.kt)("code",{className:"language-jsx",parentName:"pre"},'const fetch = require("node-fetch");\n\n// get the token from `server.cfg`\nconst token = GetConvar("snailycad_v4_api_token");\n// example.com/v1\nconst apiUrl = GetConvar("snailycad_v4_api_url");\n\n// this must be: "snaily-cad-api-token"\nconst API_TOKEN_HEADER_NAME = "snaily-cad-api-token";\n\nasync function getValuesFromCAD() {\n  // get all the vehicles, weapons, genders and ethnicities\n  const response = await fetch(`${apiUrl}/admin/values/vehicle?paths=weapon,gender,ethnicity`, {\n    headers: {\n      // send the token via headers.\n      API_TOKEN_HEADER_NAME: token,\n    },\n  });\n  const json = response.ok && (await response.json());\n\n  if (json) {\n    console.log("data from API: ", { json });\n  }\n}\n')))}u.isMDXComponent=!0,n.default=u}},function(e){e.O(0,[386,774,888,179],(function(){return n=1760,e(e.s=n);var n}));var n=e.O();_N_E=n}]);